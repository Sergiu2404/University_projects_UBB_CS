{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\solved_exam_models\\\\files_catalog_app\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\solved_exam_models\\\\files_catalog_app\\\\server\",\"filename\":\"D:\\\\solved_exam_models\\\\files_catalog_app\\\\server\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\solved_exam_models\\\\files_catalog_app\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"D:\\\\solved_exam_models\\\\files_catalog_app\\\\server\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"D:\\\\solved_exam_models\\\\files_catalog_app\\\\server\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.7:development":{"value":{"code":"\"use strict\";\n\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nvar koa = require('koa');\nvar app = module.exports = new koa();\nvar server = require('http').createServer(app.callback());\nvar WebSocket = require('ws');\nvar wss = new WebSocket.Server({\n  server: server\n});\nvar Router = require('koa-router');\nvar cors = require('@koa/cors');\nvar bodyParser = require('koa-bodyparser');\napp.use(bodyParser());\napp.use(cors());\napp.use(middleware);\nfunction middleware(ctx, next) {\n  var start = new Date();\n  return next().then(function () {\n    var ms = new Date() - start;\n    console.log(\"\".concat(start.toLocaleTimeString(), \" \").concat(ctx.response.status, \" \").concat(ctx.request.method, \" \").concat(ctx.request.url, \" - \").concat(ms, \"ms\"));\n  });\n}\nvar files = [{\n  id: 1,\n  name: \"File1\",\n  status: \"open\",\n  size: 1000,\n  location: \"root\",\n  usage: 350\n}, {\n  id: 2,\n  name: \"File2\",\n  status: \"open\",\n  size: 1000,\n  location: \"src\",\n  usage: 150\n}, {\n  id: 3,\n  name: \"FIle3\",\n  status: \"open\",\n  size: 1000,\n  location: \"root\",\n  usage: 80\n}, {\n  id: 4,\n  name: \"FIle4\",\n  status: \"open\",\n  size: 1000,\n  location: \"user\",\n  usage: 120\n}, {\n  id: 5,\n  name: \"FIle5\",\n  status: \"open\",\n  size: 1000,\n  location: \"root\",\n  usage: 800\n}, {\n  id: 6,\n  name: \"FIle6\",\n  status: \"open\",\n  size: 1000,\n  location: \"src\",\n  usage: 250\n}, {\n  id: 7,\n  name: \"FIle7\",\n  status: \"shared\",\n  size: 1000,\n  location: \"src\",\n  usage: 180\n}, {\n  id: 8,\n  name: \"FIle8\",\n  status: \"open\",\n  size: 1000,\n  location: \"user\",\n  usage: 40\n}, {\n  id: 9,\n  name: \"FIle9\",\n  status: \"shared\",\n  size: 1000,\n  location: \"system\",\n  usage: 90\n}, {\n  id: 10,\n  name: \"FIle10\",\n  status: \"shared\",\n  size: 1000,\n  location: \"root\",\n  usage: 130\n}, {\n  id: 11,\n  name: \"FIle11\",\n  status: \"shared\",\n  size: 1000,\n  location: \"user\",\n  usage: 280\n}, {\n  id: 12,\n  name: \"FIle12\",\n  status: \"shared\",\n  size: 1000,\n  location: \"home\",\n  usage: 200\n}, {\n  id: 13,\n  name: \"FIle13\",\n  status: \"shared\",\n  size: 1000,\n  location: \"user\",\n  usage: 60\n}, {\n  id: 14,\n  name: \"FIle14\",\n  status: \"shared\",\n  size: 1000,\n  location: \"root\",\n  usage: 180\n}, {\n  id: 15,\n  name: \"FIle15\",\n  status: \"shared\",\n  size: 1000,\n  location: \"home\",\n  usage: 120\n}];\nvar router = new Router();\nrouter.get('/all', function (ctx) {\n  //console.log(ctx.request);\n  ctx.response.body = files;\n  ctx.response.status = 200;\n});\nrouter.get('/locations', function (ctx) {\n  var allLocations = files.map(function (file) {\n    return file.location;\n  });\n  var locationsSet = new Set(allLocations);\n  ctx.response.body = _toConsumableArray(locationsSet);\n  ctx.response.status = 200;\n});\nrouter.get('/files/:location', function (ctx) {\n  var headers = ctx.params;\n  var location = headers.location;\n  var filesByLocation = files.filter(function (file) {\n    return file.location == location;\n  });\n  console.log(filesByLocation);\n  ctx.response.body = _toConsumableArray(filesByLocation);\n  ctx.response.status = 200;\n});\nvar broadcast = function broadcast(data) {\n  return wss.clients.forEach(function (client) {\n    if (client.readyState === WebSocket.OPEN) {\n      client.send(JSON.stringify(data));\n    }\n  });\n};\nrouter.post('/file', function (ctx) {\n  var headers = ctx.request.body;\n  var name = headers.name;\n  var status = headers.status;\n  var size = headers.size;\n  var location = headers.location;\n  var usage = headers.usage;\n  console.log(name, status, size, location, usage);\n  if (typeof name !== 'undefined' && typeof status !== 'undefined' && typeof size !== 'undefined' && typeof location !== 'undefined' && typeof usage !== 'undefined') {\n    var index = files.findIndex(function (file) {\n      return file.name == name && file.status == status;\n    });\n    if (index !== -1) {\n      var msg = \"The entity already exists!\";\n      console.log(msg);\n      ctx.response.body = {\n        text: msg\n      };\n      ctx.response.status = 404;\n    } else {\n      var maxId = Math.max.apply(Math, files.map(function (file) {\n        return file.id;\n      })) + 1;\n      var newFile = {\n        id: maxId,\n        name: name,\n        status: status,\n        size: size,\n        location: location,\n        usage: usage\n      };\n      files.push(newFile);\n      broadcast(newFile);\n      ctx.response.body = newFile;\n      ctx.response.status = 200;\n    }\n  } else {\n    var _msg = \"Missing or invalid name: \" + name + \" status: \" + status + \" size: \" + size + \" location: \" + location + \" usage: \" + usage;\n    console.log(_msg);\n    ctx.response.body = {\n      text: _msg\n    };\n    ctx.response.status = 404;\n  }\n  router.del(\"/file/:id\", function (ctx) {\n    // console.log(\"ctx: \" + JSON.stringify(ctx));\n    var headers = ctx.params;\n    // console.log(\"body: \" + JSON.stringify(headers));\n    var id = headers.id;\n    if (typeof id !== \"undefined\") {\n      var _index = files.findIndex(function (file) {\n        return file.id == id;\n      });\n      if (_index === -1) {\n        var _msg2 = \"No entity with id: \" + id;\n        console.log(_msg2);\n        ctx.response.body = {\n          text: _msg2\n        };\n        ctx.response.status = 404;\n      } else {\n        var file = files[_index];\n        files.splice(_index, 1);\n        ctx.response.body = file;\n        ctx.response.status = 200;\n      }\n    } else {\n      ctx.response.body = {\n        text: \"Id missing or invalid\"\n      };\n      ctx.response.status = 404;\n    }\n  });\n});\napp.use(router.routes());\napp.use(router.allowedMethods());\nvar port = 2404;\nserver.listen(port, '0.0.0.0', function () {\n  console.log(\"\\uD83D\\uDE80 Server listening on \".concat(port, \" ... \\uD83D\\uDE80\"));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJrb2EiLCJyZXF1aXJlIiwiYXBwIiwibW9kdWxlIiwiZXhwb3J0cyIsInNlcnZlciIsImNyZWF0ZVNlcnZlciIsImNhbGxiYWNrIiwiV2ViU29ja2V0Iiwid3NzIiwiU2VydmVyIiwiUm91dGVyIiwiY29ycyIsImJvZHlQYXJzZXIiLCJ1c2UiLCJtaWRkbGV3YXJlIiwiY3R4IiwibmV4dCIsInN0YXJ0IiwiRGF0ZSIsInRoZW4iLCJtcyIsImNvbnNvbGUiLCJsb2ciLCJjb25jYXQiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJyZXNwb25zZSIsInN0YXR1cyIsInJlcXVlc3QiLCJtZXRob2QiLCJ1cmwiLCJmaWxlcyIsImlkIiwibmFtZSIsInNpemUiLCJsb2NhdGlvbiIsInVzYWdlIiwicm91dGVyIiwiZ2V0IiwiYm9keSIsImFsbExvY2F0aW9ucyIsIm1hcCIsImZpbGUiLCJsb2NhdGlvbnNTZXQiLCJTZXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJoZWFkZXJzIiwicGFyYW1zIiwiZmlsZXNCeUxvY2F0aW9uIiwiZmlsdGVyIiwiYnJvYWRjYXN0IiwiZGF0YSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3QiLCJpbmRleCIsImZpbmRJbmRleCIsIm1zZyIsInRleHQiLCJtYXhJZCIsIk1hdGgiLCJtYXgiLCJhcHBseSIsIm5ld0ZpbGUiLCJwdXNoIiwiZGVsIiwic3BsaWNlIiwicm91dGVzIiwiYWxsb3dlZE1ldGhvZHMiLCJwb3J0IiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJEOlxcc29sdmVkX2V4YW1fbW9kZWxzXFxmaWxlc19jYXRhbG9nX2FwcFxcc2VydmVyXFxzcmNcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGtvYSA9IHJlcXVpcmUoJ2tvYScpO1xyXG52YXIgYXBwID0gbW9kdWxlLmV4cG9ydHMgPSBuZXcga29hKCk7XHJcbmNvbnN0IHNlcnZlciA9IHJlcXVpcmUoJ2h0dHAnKS5jcmVhdGVTZXJ2ZXIoYXBwLmNhbGxiYWNrKCkpO1xyXG5jb25zdCBXZWJTb2NrZXQgPSByZXF1aXJlKCd3cycpO1xyXG5jb25zdCB3c3MgPSBuZXcgV2ViU29ja2V0LlNlcnZlcih7IHNlcnZlciB9KTtcclxuY29uc3QgUm91dGVyID0gcmVxdWlyZSgna29hLXJvdXRlcicpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnQGtvYS9jb3JzJyk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdrb2EtYm9keXBhcnNlcicpO1xyXG5cclxuYXBwLnVzZShib2R5UGFyc2VyKCkpO1xyXG5cclxuYXBwLnVzZShjb3JzKCkpO1xyXG5cclxuYXBwLnVzZShtaWRkbGV3YXJlKTtcclxuXHJcbmZ1bmN0aW9uIG1pZGRsZXdhcmUoY3R4LCBuZXh0KSB7XHJcbiAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpO1xyXG4gIHJldHVybiBuZXh0KCkudGhlbigoKSA9PiB7XHJcbiAgICBjb25zdCBtcyA9IG5ldyBEYXRlKCkgLSBzdGFydDtcclxuICAgIGNvbnNvbGUubG9nKGAke3N0YXJ0LnRvTG9jYWxlVGltZVN0cmluZygpfSAke2N0eC5yZXNwb25zZS5zdGF0dXN9ICR7Y3R4LnJlcXVlc3QubWV0aG9kfSAke2N0eC5yZXF1ZXN0LnVybH0gLSAke21zfW1zYCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGZpbGVzID0gW1xyXG4gIHsgaWQ6IDEsIG5hbWU6IFwiRmlsZTFcIiwgc3RhdHVzOiBcIm9wZW5cIiwgc2l6ZTogMTAwMCwgbG9jYXRpb246IFwicm9vdFwiLCB1c2FnZTogMzUwIH0sXHJcbiAgeyBpZDogMiwgbmFtZTogXCJGaWxlMlwiLCBzdGF0dXM6IFwib3BlblwiLCBzaXplOiAxMDAwLCBsb2NhdGlvbjogXCJzcmNcIiwgdXNhZ2U6IDE1MCB9LFxyXG4gIHsgaWQ6IDMsIG5hbWU6IFwiRklsZTNcIiwgc3RhdHVzOiBcIm9wZW5cIiwgc2l6ZTogMTAwMCwgbG9jYXRpb246IFwicm9vdFwiLCB1c2FnZTogODAgfSxcclxuICB7IGlkOiA0LCBuYW1lOiBcIkZJbGU0XCIsIHN0YXR1czogXCJvcGVuXCIsIHNpemU6IDEwMDAsIGxvY2F0aW9uOiBcInVzZXJcIiwgdXNhZ2U6IDEyMCB9LFxyXG4gIHsgaWQ6IDUsIG5hbWU6IFwiRklsZTVcIiwgc3RhdHVzOiBcIm9wZW5cIiwgc2l6ZToxMDAwLCBsb2NhdGlvbjogXCJyb290XCIsIHVzYWdlOiA4MDAgfSxcclxuICB7IGlkOiA2LCBuYW1lOiBcIkZJbGU2XCIsIHN0YXR1czogXCJvcGVuXCIsIHNpemU6IDEwMDAsIGxvY2F0aW9uOiBcInNyY1wiLCB1c2FnZTogMjUwIH0sXHJcbiAgeyBpZDogNywgbmFtZTogXCJGSWxlN1wiLCBzdGF0dXM6IFwic2hhcmVkXCIsIHNpemU6IDEwMDAsIGxvY2F0aW9uOiBcInNyY1wiLCB1c2FnZTogMTgwIH0sXHJcbiAgeyBpZDogOCwgbmFtZTogXCJGSWxlOFwiLCBzdGF0dXM6IFwib3BlblwiLCBzaXplOiAxMDAwLCBsb2NhdGlvbjogXCJ1c2VyXCIsIHVzYWdlOiA0MCB9LFxyXG4gIHsgaWQ6IDksIG5hbWU6IFwiRklsZTlcIiwgc3RhdHVzOiBcInNoYXJlZFwiLCBzaXplOiAxMDAwLCBsb2NhdGlvbjogXCJzeXN0ZW1cIiwgdXNhZ2U6IDkwIH0sXHJcbiAgeyBpZDogMTAsIG5hbWU6IFwiRklsZTEwXCIsIHN0YXR1czogXCJzaGFyZWRcIiwgc2l6ZTogMTAwMCwgbG9jYXRpb246IFwicm9vdFwiLCB1c2FnZTogMTMwIH0sXHJcbiAgeyBpZDogMTEsIG5hbWU6IFwiRklsZTExXCIsIHN0YXR1czogXCJzaGFyZWRcIiwgc2l6ZTogMTAwMCwgbG9jYXRpb246IFwidXNlclwiLCB1c2FnZTogMjgwIH0sXHJcbiAgeyBpZDogMTIsIG5hbWU6IFwiRklsZTEyXCIsIHN0YXR1czogXCJzaGFyZWRcIiwgc2l6ZTogMTAwMCwgbG9jYXRpb246IFwiaG9tZVwiLCB1c2FnZTogMjAwIH0sXHJcbiAgeyBpZDogMTMsIG5hbWU6IFwiRklsZTEzXCIsIHN0YXR1czogXCJzaGFyZWRcIiwgc2l6ZTogMTAwMCwgbG9jYXRpb246IFwidXNlclwiLCB1c2FnZTogNjAgfSxcclxuICB7IGlkOiAxNCwgbmFtZTogXCJGSWxlMTRcIiwgc3RhdHVzOiBcInNoYXJlZFwiLCBzaXplOiAxMDAwLCBsb2NhdGlvbjogXCJyb290XCIsIHVzYWdlOiAxODAgfSxcclxuICB7IGlkOiAxNSwgbmFtZTogXCJGSWxlMTVcIiwgc3RhdHVzOiBcInNoYXJlZFwiLCBzaXplOiAxMDAwLCBsb2NhdGlvbjogXCJob21lXCIsIHVzYWdlOiAxMjAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5nZXQoJy9hbGwnLCBjdHggPT4ge1xyXG4gICAgLy9jb25zb2xlLmxvZyhjdHgucmVxdWVzdCk7XHJcbiAgY3R4LnJlc3BvbnNlLmJvZHkgPSBmaWxlcztcclxuICBjdHgucmVzcG9uc2Uuc3RhdHVzID0gMjAwO1xyXG59KTtcclxuXHJcbnJvdXRlci5nZXQoJy9sb2NhdGlvbnMnLCBjdHggPT4ge1xyXG4gIGNvbnN0IGFsbExvY2F0aW9ucyA9IGZpbGVzLm1hcChmaWxlID0+IGZpbGUubG9jYXRpb24pO1xyXG4gIGNvbnN0IGxvY2F0aW9uc1NldCA9IG5ldyBTZXQoYWxsTG9jYXRpb25zKTtcclxuICBjdHgucmVzcG9uc2UuYm9keSA9IFsuLi5sb2NhdGlvbnNTZXRdO1xyXG4gIGN0eC5yZXNwb25zZS5zdGF0dXMgPSAyMDA7XHJcbn0pO1xyXG5cclxucm91dGVyLmdldCgnL2ZpbGVzLzpsb2NhdGlvbicsIGN0eCA9PiB7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gY3R4LnBhcmFtcztcclxuICAgIGNvbnN0IGxvY2F0aW9uID0gaGVhZGVycy5sb2NhdGlvbjtcclxuXHJcbiAgICBjb25zdCBmaWxlc0J5TG9jYXRpb24gPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLmxvY2F0aW9uID09IGxvY2F0aW9uKTtcclxuICAgIGNvbnNvbGUubG9nKGZpbGVzQnlMb2NhdGlvbik7XHJcblxyXG4gICAgY3R4LnJlc3BvbnNlLmJvZHkgPSBbLi4uZmlsZXNCeUxvY2F0aW9uXTtcclxuICAgIGN0eC5yZXNwb25zZS5zdGF0dXMgPSAyMDA7XHJcbiAgfSk7XHJcblxyXG5jb25zdCBicm9hZGNhc3QgPSAoZGF0YSkgPT5cclxuICB3c3MuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcclxuICAgIGlmIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxucm91dGVyLnBvc3QoJy9maWxlJywgY3R4ID0+IHtcclxuICBjb25zdCBoZWFkZXJzID0gY3R4LnJlcXVlc3QuYm9keTtcclxuXHJcbiAgY29uc3QgbmFtZSA9IGhlYWRlcnMubmFtZTtcclxuICBjb25zdCBzdGF0dXMgPSBoZWFkZXJzLnN0YXR1cztcclxuICBjb25zdCBzaXplID0gaGVhZGVycy5zaXplO1xyXG4gIGNvbnN0IGxvY2F0aW9uID0gaGVhZGVycy5sb2NhdGlvbjtcclxuICBjb25zdCB1c2FnZSA9IGhlYWRlcnMudXNhZ2U7XHJcblxyXG4gIGNvbnNvbGUubG9nKG5hbWUsIHN0YXR1cywgc2l6ZSwgbG9jYXRpb24sIHVzYWdlKTtcclxuICBpZiAodHlwZW9mIG5hbWUgIT09ICd1bmRlZmluZWQnXHJcbiAgICAmJiB0eXBlb2Ygc3RhdHVzICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgJiYgdHlwZW9mIHNpemUgIT09ICd1bmRlZmluZWQnXHJcbiAgICAmJiB0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnXHJcbiAgICAmJiB0eXBlb2YgdXNhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGZpbGVzLmZpbmRJbmRleChmaWxlID0+IGZpbGUubmFtZSA9PSBuYW1lICYmIGZpbGUuc3RhdHVzID09IHN0YXR1cyk7XHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIGNvbnN0IG1zZyA9IFwiVGhlIGVudGl0eSBhbHJlYWR5IGV4aXN0cyFcIjtcclxuICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgY3R4LnJlc3BvbnNlLmJvZHkgPSB7IHRleHQ6IG1zZyB9O1xyXG4gICAgICBjdHgucmVzcG9uc2Uuc3RhdHVzID0gNDA0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IG1heElkID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgZmlsZXMubWFwKGZpbGUgPT4gZmlsZS5pZCkpICsgMTtcclxuICAgICAgbGV0IG5ld0ZpbGUgPSB7XHJcbiAgICAgICAgaWQ6IG1heElkLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgIHNpemUsXHJcbiAgICAgICAgbG9jYXRpb24sXHJcbiAgICAgICAgdXNhZ2VcclxuICAgICAgfTtcclxuICAgICAgZmlsZXMucHVzaChuZXdGaWxlKTtcclxuICAgICAgYnJvYWRjYXN0KG5ld0ZpbGUpO1xyXG4gICAgICBjdHgucmVzcG9uc2UuYm9keSA9IG5ld0ZpbGU7XHJcbiAgICAgIGN0eC5yZXNwb25zZS5zdGF0dXMgPSAyMDA7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IG1zZyA9IFwiTWlzc2luZyBvciBpbnZhbGlkIG5hbWU6IFwiICsgbmFtZSArIFwiIHN0YXR1czogXCIgKyBzdGF0dXMgKyBcIiBzaXplOiBcIiArIHNpemVcclxuICAgICAgKyBcIiBsb2NhdGlvbjogXCIgKyBsb2NhdGlvbiArIFwiIHVzYWdlOiBcIiArIHVzYWdlO1xyXG4gICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgIGN0eC5yZXNwb25zZS5ib2R5ID0geyB0ZXh0OiBtc2cgfTtcclxuICAgIGN0eC5yZXNwb25zZS5zdGF0dXMgPSA0MDQ7XHJcbiAgfVxyXG5cclxuICByb3V0ZXIuZGVsKFwiL2ZpbGUvOmlkXCIsIChjdHgpID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiY3R4OiBcIiArIEpTT04uc3RyaW5naWZ5KGN0eCkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGN0eC5wYXJhbXM7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcImJvZHk6IFwiICsgSlNPTi5zdHJpbmdpZnkoaGVhZGVycykpO1xyXG4gICAgY29uc3QgaWQgPSBoZWFkZXJzLmlkO1xyXG4gICAgaWYgKHR5cGVvZiBpZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBjb25zdCBpbmRleCA9IGZpbGVzLmZpbmRJbmRleCgoZmlsZSkgPT4gZmlsZS5pZCA9PSBpZCk7XHJcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICBjb25zdCBtc2cgPSBcIk5vIGVudGl0eSB3aXRoIGlkOiBcIiArIGlkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgY3R4LnJlc3BvbnNlLmJvZHkgPSB7IHRleHQ6IG1zZyB9O1xyXG4gICAgICAgIGN0eC5yZXNwb25zZS5zdGF0dXMgPSA0MDQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGZpbGUgPSBmaWxlc1tpbmRleF07XHJcbiAgICAgICAgZmlsZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBjdHgucmVzcG9uc2UuYm9keSA9IGZpbGU7XHJcbiAgICAgICAgY3R4LnJlc3BvbnNlLnN0YXR1cyA9IDIwMDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3R4LnJlc3BvbnNlLmJvZHkgPSB7IHRleHQ6IFwiSWQgbWlzc2luZyBvciBpbnZhbGlkXCIgfTtcclxuICAgICAgY3R4LnJlc3BvbnNlLnN0YXR1cyA9IDQwNDtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuXHJcblxyXG5cclxufSk7XHJcblxyXG5hcHAudXNlKHJvdXRlci5yb3V0ZXMoKSk7XHJcbmFwcC51c2Uocm91dGVyLmFsbG93ZWRNZXRob2RzKCkpO1xyXG5cclxuY29uc3QgcG9ydCA9IDI0MDQ7XHJcblxyXG5zZXJ2ZXIubGlzdGVuKHBvcnQsICcwLjAuMC4wJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciBsaXN0ZW5pbmcgb24gJHtwb3J0fSAuLi4g8J+agGApO1xyXG59KTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBSUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ3hCLElBQUlDLEdBQUcsR0FBR0MsTUFBTSxDQUFDQyxPQUFPLEdBQUcsSUFBSUosR0FBRyxDQUFDLENBQUM7QUFDcEMsSUFBTUssTUFBTSxHQUFHSixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUNLLFlBQVksQ0FBQ0osR0FBRyxDQUFDSyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQzNELElBQU1DLFNBQVMsR0FBR1AsT0FBTyxDQUFDLElBQUksQ0FBQztBQUMvQixJQUFNUSxHQUFHLEdBQUcsSUFBSUQsU0FBUyxDQUFDRSxNQUFNLENBQUM7RUFBRUwsTUFBTSxFQUFOQTtBQUFPLENBQUMsQ0FBQztBQUM1QyxJQUFNTSxNQUFNLEdBQUdWLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDcEMsSUFBTVcsSUFBSSxHQUFHWCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ2pDLElBQU1ZLFVBQVUsR0FBR1osT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBRTVDQyxHQUFHLENBQUNZLEdBQUcsQ0FBQ0QsVUFBVSxDQUFDLENBQUMsQ0FBQztBQUVyQlgsR0FBRyxDQUFDWSxHQUFHLENBQUNGLElBQUksQ0FBQyxDQUFDLENBQUM7QUFFZlYsR0FBRyxDQUFDWSxHQUFHLENBQUNDLFVBQVUsQ0FBQztBQUVuQixTQUFTQSxVQUFVQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUM3QixJQUFNQyxLQUFLLEdBQUcsSUFBSUMsSUFBSSxDQUFDLENBQUM7RUFD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R0FBRyxDQUFDK0IsTUFBTTtJQUMxQjtJQUNBLElBQU1mLEVBQUUsR0FBR2MsT0FBTyxDQUFDZCxFQUFFO0lBQ3JCLElBQUksT0FBT0EsRUFBRSxLQUFLLFdBQVcsRUFBRTtNQUM3QixJQUFNNkIsTUFBSyxHQUFHOUIsS0FBSyxDQUFDK0IsU0FBUyxDQUFDLFVBQUNwQixJQUFJO1FBQUEsT0FBS0EsSUFBSSxDQUFDVixFQUFFLElBQUlBLEVBQUU7TUFBQSxFQUFDO01BQ3RELElBQUk2QixNQUFLLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDaEIsSUFBTUUsS0FBRyxHQUFHLHFCQUFxQixHQUFHL0IsRUFBRTtRQUN0Q1YsT0FBTyxDQUFDQyxHQUFHLENBQUN3QyxLQUFHLENBQUM7UUFDaEIvQyxHQUFHLENBQUNVLFFBQVEsQ0FBQ2EsSUFBSSxHQUFHO1VBQUV5QixJQUFJLEVBQUVEO1FBQUksQ0FBQztRQUNqQy9DLEdBQUcsQ0FBQ1UsUUFBUSxDQUFDQyxNQUFNLEdBQUcsR0FBRztNQUMzQixDQUFDLE1BQU07UUFDTCxJQUFJZSxJQUFJLEdBQUdYLEtBQUssQ0FBQzhCLE1BQUssQ0FBQztRQUN2QjlCLEtBQUssQ0FBQ3lDLE1BQU0sQ0FBQ1gsTUFBSyxFQUFFLENBQUMsQ0FBQztRQUN0QjdDLEdBQUcsQ0FBQ1UsUUFBUSxDQUFDYSxJQUFJLEdBQUdHLElBQUk7UUFDeEIxQixHQUFHLENBQUNVLFFBQVEsQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7TUFDM0I7SUFDRixDQUFDLE1BQU07TUFDTFgsR0FBRyxDQUFDVSxRQUFRLENBQUNhLElBQUksR0FBRztRQUFFeUIsSUFBSSxFQUFFO01BQXdCLENBQUM7TUFDckRoRCxHQUFHLENBQUNVLFFBQVEsQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7SUFDM0I7RUFDRixDQUFDLENBQUM7QUFLSixDQUFDLENBQUM7QUFFRnpCLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDdUIsTUFBTSxDQUFDb0MsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN4QnZFLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDdUIsTUFBTSxDQUFDcUMsY0FBYyxDQUFDLENBQUMsQ0FBQztBQUVoQyxJQUFNQyxJQUFJLEdBQUcsSUFBSTtBQUVqQnRFLE1BQU0sQ0FBQ3VFLE1BQU0sQ0FBQ0QsSUFBSSxFQUFFLFNBQVMsRUFBRSxZQUFNO0VBQ25DckQsT0FBTyxDQUFDQyxHQUFHLHFDQUFBQyxNQUFBLENBQTJCbUQsSUFBSSxzQkFBUyxDQUFDO0FBQ3RELENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["koa","require","app","module","exports","server","createServer","callback","WebSocket","wss","Server","Router","cors","bodyParser","use","middleware","ctx","next","start","Date","then","ms","console","log","concat","toLocaleTimeString","response","status","request","method","url","files","id","name","size","location","usage","router","get","body","allLocations","map","file","locationsSet","Set","_toConsumableArray","headers","params","filesByLocation","filter","broadcast","data","clients","forEach","client","readyState","OPEN","send","JSON","stringify","post","index","findIndex","msg","text","maxId","Math","max","apply","newFile","push","del","splice","routes","allowedMethods","port","listen"],"sourceRoot":"D:\\solved_exam_models\\files_catalog_app\\server\\src\\","sources":["index.js"],"sourcesContent":["var koa = require('koa');\r\nvar app = module.exports = new koa();\r\nconst server = require('http').createServer(app.callback());\r\nconst WebSocket = require('ws');\r\nconst wss = new WebSocket.Server({ server });\r\nconst Router = require('koa-router');\r\nconst cors = require('@koa/cors');\r\nconst bodyParser = require('koa-bodyparser');\r\n\r\napp.use(bodyParser());\r\n\r\napp.use(cors());\r\n\r\napp.use(middleware);\r\n\r\nfunction middleware(ctx, next) {\r\n  const start = new Date();\r\n  return next().then(() => {\r\n    const ms = new Date() - start;\r\n    console.log(`${start.toLocaleTimeString()} ${ctx.response.status} ${ctx.request.method} ${ctx.request.url} - ${ms}ms`);\r\n  });\r\n}\r\n\r\nconst files = [\r\n  { id: 1, name: \"File1\", status: \"open\", size: 1000, location: \"root\", usage: 350 },\r\n  { id: 2, name: \"File2\", status: \"open\", size: 1000, location: \"src\", usage: 150 },\r\n  { id: 3, name: \"FIle3\", status: \"open\", size: 1000, location: \"root\", usage: 80 },\r\n  { id: 4, name: \"FIle4\", status: \"open\", size: 1000, location: \"user\", usage: 120 },\r\n  { id: 5, name: \"FIle5\", status: \"open\", size:1000, location: \"root\", usage: 800 },\r\n  { id: 6, name: \"FIle6\", status: \"open\", size: 1000, location: \"src\", usage: 250 },\r\n  { id: 7, name: \"FIle7\", status: \"shared\", size: 1000, location: \"src\", usage: 180 },\r\n  { id: 8, name: \"FIle8\", status: \"open\", size: 1000, location: \"user\", usage: 40 },\r\n  { id: 9, name: \"FIle9\", status: \"shared\", size: 1000, location: \"system\", usage: 90 },\r\n  { id: 10, name: \"FIle10\", status: \"shared\", size: 1000, location: \"root\", usage: 130 },\r\n  { id: 11, name: \"FIle11\", status: \"shared\", size: 1000, location: \"user\", usage: 280 },\r\n  { id: 12, name: \"FIle12\", status: \"shared\", size: 1000, location: \"home\", usage: 200 },\r\n  { id: 13, name: \"FIle13\", status: \"shared\", size: 1000, location: \"user\", usage: 60 },\r\n  { id: 14, name: \"FIle14\", status: \"shared\", size: 1000, location: \"root\", usage: 180 },\r\n  { id: 15, name: \"FIle15\", status: \"shared\", size: 1000, location: \"home\", usage: 120 },\r\n];\r\n\r\nconst router = new Router();\r\n\r\nrouter.get('/all', ctx => {\r\n    //console.log(ctx.request);\r\n  ctx.response.body = files;\r\n  ctx.response.status = 200;\r\n});\r\n\r\nrouter.get('/locations', ctx => {\r\n  const allLocations = files.map(file => file.location);\r\n  const locationsSet = new Set(allLocations);\r\n  ctx.response.body = [...locationsSet];\r\n  ctx.response.status = 200;\r\n});\r\n\r\nrouter.get('/files/:location', ctx => {\r\n    const headers = ctx.params;\r\n    const location = headers.location;\r\n\r\n    const filesByLocation = files.filter(file => file.location == location);\r\n    console.log(filesByLocation);\r\n\r\n    ctx.response.body = [...filesByLocation];\r\n    ctx.response.status = 200;\r\n  });\r\n\r\nconst broadcast = (data) =>\r\n  wss.clients.forEach((client) => {\r\n    if (client.readyState === WebSocket.OPEN) {\r\n      client.send(JSON.stringify(data));\r\n    }\r\n  });\r\n\r\nrouter.post('/file', ctx => {\r\n  const headers = ctx.request.body;\r\n\r\n  const name = headers.name;\r\n  const status = headers.status;\r\n  const size = headers.size;\r\n  const location = headers.location;\r\n  const usage = headers.usage;\r\n\r\n  console.log(name, status, size, location, usage);\r\n  if (typeof name !== 'undefined'\r\n    && typeof status !== 'undefined'\r\n    && typeof size !== 'undefined'\r\n    && typeof location !== 'undefined'\r\n    && typeof usage !== 'undefined') {\r\n    const index = files.findIndex(file => file.name == name && file.status == status);\r\n    if (index !== -1) {\r\n      const msg = \"The entity already exists!\";\r\n      console.log(msg);\r\n      ctx.response.body = { text: msg };\r\n      ctx.response.status = 404;\r\n    } else {\r\n      let maxId = Math.max.apply(Math, files.map(file => file.id)) + 1;\r\n      let newFile = {\r\n        id: maxId,\r\n        name,\r\n        status,\r\n        size,\r\n        location,\r\n        usage\r\n      };\r\n      files.push(newFile);\r\n      broadcast(newFile);\r\n      ctx.response.body = newFile;\r\n      ctx.response.status = 200;\r\n    }\r\n  } else {\r\n    const msg = \"Missing or invalid name: \" + name + \" status: \" + status + \" size: \" + size\r\n      + \" location: \" + location + \" usage: \" + usage;\r\n    console.log(msg);\r\n    ctx.response.body = { text: msg };\r\n    ctx.response.status = 404;\r\n  }\r\n\r\n  router.del(\"/file/:id\", (ctx) => {\r\n    // console.log(\"ctx: \" + JSON.stringify(ctx));\r\n    const headers = ctx.params;\r\n    // console.log(\"body: \" + JSON.stringify(headers));\r\n    const id = headers.id;\r\n    if (typeof id !== \"undefined\") {\r\n      const index = files.findIndex((file) => file.id == id);\r\n      if (index === -1) {\r\n        const msg = \"No entity with id: \" + id;\r\n        console.log(msg);\r\n        ctx.response.body = { text: msg };\r\n        ctx.response.status = 404;\r\n      } else {\r\n        let file = files[index];\r\n        files.splice(index, 1);\r\n        ctx.response.body = file;\r\n        ctx.response.status = 200;\r\n      }\r\n    } else {\r\n      ctx.response.body = { text: \"Id missing or invalid\" };\r\n      ctx.response.status = 404;\r\n    }\r\n  });\r\n  \r\n\r\n\r\n\r\n});\r\n\r\napp.use(router.routes());\r\napp.use(router.allowedMethods());\r\n\r\nconst port = 2404;\r\n\r\nserver.listen(port, '0.0.0.0', () => {\r\n  console.log(`ðŸš€ Server listening on ${port} ... ðŸš€`);\r\n});"],"mappings":"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","ignoreList":[]}},"mtime":1737982179290}}